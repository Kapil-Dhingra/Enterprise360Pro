"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[235],{6235:(At,x,c)=>{c.r(x),c.d(x,{AddPurchaseModule:()=>xt});var m=c(6814),l=c(1896),a=c(6223),C=c(3519),p=c.n(C),t=c(5879),A=c(8789),T=c(6381),Z=c(3680),w=c(5986),v=c(8034),h=c(4170),b=c(2032),y=c(7466),F=c(8525),f=c(1545),q=c(617),I=c(2596);function N(o,s){1&o&&(t.TgZ(0,"div",7)(1,"h6",8),t._uU(2,"There are no adjustments. Please click on "),t.TgZ(3,"q"),t._uU(4,"Add adjustment"),t.qZA(),t._uU(5," button to add an adjustment."),t.qZA()())}function P(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij("(",e.value.per_or_amount,"%)")}}function J(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",9)(1,"h6",10),t._uU(2),t.qZA(),t.TgZ(3,"div",11)(4,"div",12)(5,"mat-form-field",13)(6,"mat-label"),t._uU(7,"Adjustment name"),t.qZA(),t._UZ(8,"input",14),t.qZA(),t.TgZ(9,"mat-form-field",15)(10,"mat-label"),t._uU(11,"Type (+/-)"),t.qZA(),t.TgZ(12,"mat-select",16),t.NdJ("selectionChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.calculate())}),t.TgZ(13,"mat-option",17),t._uU(14,"Add(+)"),t.qZA(),t.TgZ(15,"mat-option",18),t._uU(16,"Sub(-)"),t.qZA()()()(),t.TgZ(17,"div",12)(18,"mat-form-field",13)(19,"mat-label"),t._uU(20,"Input Type"),t.qZA(),t.TgZ(21,"mat-select",19),t.NdJ("selectionChange",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.calculate())}),t.TgZ(22,"mat-option",20),t._uU(23,"Per(%)"),t.qZA(),t.TgZ(24,"mat-option",21),t._uU(25,"Amount"),t.qZA()()(),t.TgZ(26,"mat-form-field",15)(27,"mat-label"),t._uU(28),t.qZA(),t.TgZ(29,"input",22),t.NdJ("input",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.calculate())}),t.qZA()()(),t.TgZ(30,"div",23)(31,"p",24),t._uU(32,"Net price: "),t.TgZ(33,"strong"),t._uU(34),t.qZA()(),t.TgZ(35,"p",24)(36,"strong"),t._uU(37),t.qZA(),t._uU(38),t.YNc(39,P,2,1,"span",25),t._uU(40,": "),t.TgZ(41,"strong"),t._uU(42),t.qZA()(),t.TgZ(43,"p",26),t._uU(44,"New Net price: "),t.TgZ(45,"strong"),t._uU(46),t.qZA()()(),t.TgZ(47,"div",27)(48,"button",28),t.NdJ("click",function(){const n=t.CHM(e).index,_=t.oxw();return t.KtG(_.removeAdjustment(n))}),t._uU(49),t.qZA()()()()}if(2&o){const e=s.$implicit,i=s.index,r=t.oxw();t.xp6(2),t.hij("Adjustment no.",i+1,""),t.xp6(1),t.Q6J("formGroupName",i),t.xp6(25),t.Oqu("percentage"==e.value.input?"Per(%)":"Amount"),t.xp6(1),t.s9C("placeholder","percentage"==e.value.input?"Per(%)":"Amount"),t.xp6(5),t.Oqu(i>0?r.taxes_surcharges_discounts.controls[i-1].value.new_net_price:r.net_price),t.xp6(3),t.Oqu(e.value.type),t.xp6(1),t.hij(" ",e.value.name," "),t.xp6(1),t.Q6J("ngIf","percentage"==e.value.input),t.xp6(3),t.Oqu("percentage"==e.value.input?e.value.percentage_amount:e.value.per_or_amount),t.xp6(4),t.Oqu(e.value.new_net_price),t.xp6(3),t.hij("Remove Adjustment no.",i+1,"")}}function G(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",29)(1,"button",30),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.getFormArray.emit(r.taxes_surcharges_discounts))}),t._uU(2),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("disabled",!e.otherCostFormGroup.valid),t.xp6(1),t.Oqu(e.submitButtonName)}}let U=(()=>{class o{constructor(e,i){this.fb=e,this.api=i,this.net_price=0,this.submitButtonName="Save",this.returnFormArray=new a.NI(!1),this.returnValidity=!1,this.returnTotal=!1,this.getFormArray=new t.vpe,this.getValidity=new t.vpe,this.getTotal=new t.vpe}ngOnInit(){this.otherCostFormGroup=this.fb.group({taxes_surcharges_discounts:this.fb.array([])}),this.existingFormArray&&this.existingFormArray.length>0&&(this.taxes_surcharges_discounts.clear(),this.existingFormArray.controls.forEach(e=>{this.taxes_surcharges_discounts.push(e)})),this.returnFormArray&&this.returnFormArray.valueChanges.subscribe(e=>{this.getFormArray.emit(this.taxes_surcharges_discounts)}),(this.returnValidity||this.returnTotal)&&this.otherCostFormGroup.valueChanges.subscribe(e=>{this.returnValidity&&this.getValidity.emit(this.otherCostFormGroup.valid),this.returnTotal&&(this.taxes_surcharges_discounts.at(-1).value.new_net_price?this.getTotal.emit(this.taxes_surcharges_discounts.at(-1).value.new_net_price):this.taxes_surcharges_discounts.length>1?this.getTotal.emit(this.taxes_surcharges_discounts[this.taxes_surcharges_discounts.length-2].value.new_net_price):1==this.taxes_surcharges_discounts.length&&this.getTotal.emit(this.net_price))})}get taxes_surcharges_discounts(){return this.otherCostFormGroup.get("taxes_surcharges_discounts")}add(){this.taxes_surcharges_discounts.push(this.fb.group({name:["",a.kI.required],type:["",a.kI.required],input:["percentage",a.kI.required],per_or_amount:[0],percentage_amount:[0],new_net_price:[0,a.kI.required]}))}calculate(){this.api.otherCostCalculation(this.net_price,this.taxes_surcharges_discounts)}removeAdjustment(e){p().fire({icon:"warning",title:"Are you sure ?",html:"Do you want to remove <label class='erp-button p-1 m-1 rounded text-white'>Adjustment no."+(e+1)+"</label>",confirmButtonText:"Yes",showCancelButton:!0,cancelButtonText:"No"}).then(i=>{i.isConfirmed&&(this.taxes_surcharges_discounts.removeAt(e),this.calculate())})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(A.s))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-taxes-discounts"]],inputs:{net_price:"net_price",existingFormArray:"existingFormArray",submitButtonName:"submitButtonName",returnFormArray:"returnFormArray",returnValidity:"returnValidity",returnTotal:"returnTotal"},outputs:{getFormArray:"getFormArray",getValidity:"getValidity",getTotal:"getTotal"},decls:8,vars:5,consts:[[3,"formGroup"],["formArrayName","taxes_surcharges_discounts",1,"row","m-0"],["class","col-sm-12 my-3",4,"ngIf"],["class","col-sm-12 border-info rounded remove-field-bottom-space mb-3 pb-2 px-0",4,"ngFor","ngForOf"],[1,"col-sm-12","text-end","px-0"],[1,"btn","btn-sm","erp-button",3,"disabled","click"],["class","col-sm-12 my-3 text-end px-0",4,"ngIf"],[1,"col-sm-12","my-3"],[1,"text-secondary","text-center"],[1,"col-sm-12","border-info","rounded","remove-field-bottom-space","mb-3","pb-2","px-0"],[1,"bg-info","font-size-sm","p-1","rounded-top"],[1,"row","m-0",3,"formGroupName"],[1,"col-sm-4"],[1,"w-100","mb-2"],["matInput","","placeholder","Adjustment name","formControlName","name"],[1,"w-100"],["formControlName","type",3,"selectionChange"],["value","+"],["value","-"],["formControlName","input",3,"selectionChange"],["value","percentage"],["value","amount"],["type","number","step","any","matInput","","formControlName","per_or_amount",3,"placeholder","input"],[1,"col-sm-4","text-end"],[1,"text-secondary"],[4,"ngIf"],[1,"text-secondary","pt-2","border-top"],[1,"col-sm-12","text-end"],[1,"btn","btn-sm","erp-button-danger",3,"click"],[1,"col-sm-12","my-3","text-end","px-0"],[1,"btn","erp-button",3,"disabled","click"]],template:function(e,i){1&e&&(t.ynx(0,0),t.TgZ(1,"div",1),t.YNc(2,N,6,0,"div",2),t.YNc(3,J,50,11,"div",3),t.TgZ(4,"div",4)(5,"button",5),t.NdJ("click",function(){return i.add()}),t._uU(6,"Add adjustment"),t.qZA()(),t.YNc(7,G,3,2,"div",6),t.qZA(),t.BQk()),2&e&&(t.Q6J("formGroup",i.otherCostFormGroup),t.xp6(2),t.Q6J("ngIf",i.taxes_surcharges_discounts.length<=0),t.xp6(1),t.Q6J("ngForOf",i.taxes_surcharges_discounts.controls),t.xp6(2),t.Q6J("disabled",i.taxes_surcharges_discounts.length>0&&!i.taxes_surcharges_discounts.controls.at(-1).valid),t.xp6(2),t.Q6J("ngIf","None"!=i.submitButtonName))},dependencies:[m.sg,m.O5,Z.ey,h.KE,h.hX,b.Nt,F.gD,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,a.x0,a.CE]}),o})();function k(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1," your business holding "),t.qZA())}function Q(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1," and "),t.qZA())}function j(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1," Vendors "),t.qZA())}function O(o,s){1&o&&(t.TgZ(0,"button",15),t._uU(1,"Add business holding"),t.qZA())}function Y(o,s){1&o&&(t.TgZ(0,"button",16),t._uU(1,"Add Vendor"),t.qZA())}function M(o,s){if(1&o&&(t.TgZ(0,"div",9)(1,"div",10)(2,"h5",11),t._uU(3," Please add "),t.YNc(4,k,2,0,"span",12),t.YNc(5,Q,2,0,"span",12),t.YNc(6,j,2,0,"span",12),t._uU(7,"first"),t.qZA(),t.YNc(8,O,2,0,"button",13),t.YNc(9,Y,2,0,"button",14),t.qZA()()),2&o){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",0==e.ownFirms.length),t.xp6(1),t.Q6J("ngIf",0==e.ownFirms.length&&0==e.vendors.length),t.xp6(1),t.Q6J("ngIf",0==e.vendors.length),t.xp6(2),t.Q6J("ngIf",0==e.ownFirms.length),t.xp6(1),t.Q6J("ngIf",0==e.vendors.length)}}function V(o,s){1&o&&(t.TgZ(0,"mat-icon"),t._uU(1,"check"),t.qZA())}function B(o,s){if(1&o&&(t.TgZ(0,"mat-option",38),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}function E(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-checkbox",52),t.NdJ("change",function(){const n=t.CHM(e).$implicit,_=t.oxw(2);return t.KtG(_.updateFirmId(n._id))}),t._uU(1),t.qZA()}if(2&o){const e=s.$implicit,i=t.oxw(2);t.Q6J("checked",i.purchaseFirstFormGroup.value.firm_ids.includes(e._id)),t.xp6(1),t.Oqu(e.name)}}function H(o,s){if(1&o&&(t.TgZ(0,"div",53)(1,"h6",25),t._uU(2),t.qZA(),t.TgZ(3,"mat-form-field",30)(4,"mat-label"),t._uU(5,"Purchase net price"),t.qZA(),t._UZ(6,"input",54),t.qZA()()),2&o){const e=s.$implicit;t.Q6J("formGroupName",s.index),t.xp6(2),t.hij("",e.value.firm_details.name," Purchase Net Price:")}}function K(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"i",78),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index,n=t.oxw(3);return t.KtG(n.removeProduct("Product no."+(r+1),n.items,r))}),t.qZA()}}function S(o,s){if(1&o&&(t.TgZ(0,"mat-option",38),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e.name)}}function D(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-form-field",68)(1,"mat-label"),t._uU(2,"Product name"),t.qZA(),t.TgZ(3,"input",79),t.NdJ("keyup",function(r){t.CHM(e);const n=t.oxw().$implicit,_=t.oxw(3);return t.KtG(_.searchProductByConnectedFirms(r,n))}),t.qZA(),t.TgZ(4,"mat-autocomplete",80,81),t.NdJ("optionSelected",function(r){t.CHM(e);const n=t.oxw().$implicit;return t.KtG(n.patchValue({product:r.option.value,product_name:r.option.value.name}))}),t.YNc(6,S,2,2,"mat-option",29),t.qZA()()}if(2&o){const e=t.MAs(5),i=t.oxw().$implicit;t.xp6(3),t.Q6J("matAutocomplete",e),t.xp6(3),t.Q6J("ngForOf",i.value.product_suggestions)}}function z(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",82)(1,"mat-form-field",83)(2,"mat-label"),t._uU(3,"Product name"),t.qZA(),t._UZ(4,"input",84),t.qZA(),t.TgZ(5,"button",85),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.KtG(r.patchValue({product:{},product_name:"",product_suggestions:[]}))}),t._uU(6,"X"),t.qZA()()}if(2&o){const e=t.oxw().$implicit;t.xp6(4),t.Q6J("value",null==e.value.product?null:e.value.product.name)}}function R(o,s){if(1&o&&(t.TgZ(0,"mat-option",38),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}function L(o,s){if(1&o&&(t.ynx(0),t.YNc(1,R,2,2,"mat-option",88),t.BQk()),2&o){const e=s.$implicit,i=t.oxw(5);t.xp6(1),t.Q6J("ngIf",i.purchaseFirstFormGroup.value.firm_ids.includes(e._id))}}function W(o,s){if(1&o&&(t.TgZ(0,"mat-form-field",86)(1,"mat-label"),t._uU(2,"Receiving business holding"),t.qZA(),t.TgZ(3,"mat-select",87),t.YNc(4,L,2,1,"ng-container",47),t.qZA()()),2&o){const e=t.oxw(4);t.xp6(4),t.Q6J("ngForOf",e.ownFirms)}}function X(o,s){if(1&o&&(t.TgZ(0,"q",90),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij("(",e.description,")")}}function tt(o,s){if(1&o&&(t.TgZ(0,"mat-option",38),t._uU(1),t.YNc(2,X,2,1,"q",89),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij("",e.name," "),t.xp6(1),t.Q6J("ngIf",e.description)}}function et(o,s){if(1&o&&(t.TgZ(0,"p",91),t._uU(1,"Gross price: "),t.TgZ(2,"strong"),t._uU(3),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.value.other_costs.length>0?e.value.other_costs.at(-1).new_net_price:e.value.net_price)}}function it(o,s){if(1&o&&(t.TgZ(0,"mat-option",38),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e.name)}}function ot(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-form-field",68)(1,"mat-label"),t._uU(2,"Product name"),t.qZA(),t.TgZ(3,"input",79),t.NdJ("keyup",function(r){t.CHM(e);const n=t.oxw().$implicit,_=t.oxw(4);return t.KtG(_.searchProductByConnectedFirms(r,n))}),t.qZA(),t.TgZ(4,"mat-autocomplete",80,81),t.NdJ("optionSelected",function(r){t.CHM(e);const n=t.oxw().$implicit;return t.KtG(n.patchValue({product:r.option.value,product_name:r.option.value.name}))}),t.YNc(6,it,2,2,"mat-option",29),t.qZA()()}if(2&o){const e=t.MAs(5),i=t.oxw().$implicit;t.xp6(3),t.Q6J("matAutocomplete",e),t.xp6(3),t.Q6J("ngForOf",i.value.product_suggestions)}}function rt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",82)(1,"mat-form-field",83)(2,"mat-label"),t._uU(3,"Product name"),t.qZA(),t._UZ(4,"input",84),t.qZA(),t.TgZ(5,"button",85),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.KtG(r.patchValue({product:{},product_name:"",product_suggestions:[]}))}),t._uU(6,"X"),t.qZA()()}if(2&o){const e=t.oxw().$implicit;t.xp6(4),t.Q6J("value",null==e.value.product?null:e.value.product.name)}}function nt(o,s){if(1&o&&(t.TgZ(0,"mat-option",38),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.label)}}function st(o,s){if(1&o&&(t.TgZ(0,"q",90),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij("(",e.description,")")}}function at(o,s){if(1&o&&(t.TgZ(0,"mat-option",38),t._uU(1),t.YNc(2,st,2,1,"q",89),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij("",e.name," "),t.xp6(1),t.Q6J("ngIf",e.description)}}function _t(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",92)(1,"h6",93),t._uU(2),t.TgZ(3,"i",94),t.NdJ("click",function(){const n=t.CHM(e).index,_=t.oxw(),g=_.index,u=_.$implicit,d=t.oxw(3);return t.KtG(d.removeProduct("Complimentary product no."+(n+1)+" of Product no."+(g+1),u.controls.additional_items,n))}),t.qZA()(),t.TgZ(4,"div",95),t.YNc(5,ot,7,2,"mat-form-field",64),t.YNc(6,rt,7,1,"div",65),t.qZA(),t.TgZ(7,"div",95)(8,"mat-form-field",68)(9,"mat-label"),t._uU(10,"Type"),t.qZA(),t.TgZ(11,"mat-select",96),t.YNc(12,nt,2,2,"mat-option",29),t.qZA()()(),t.TgZ(13,"div",95)(14,"mat-form-field",30)(15,"mat-label"),t._uU(16,"Quantity"),t.qZA(),t._UZ(17,"input",67),t.qZA()(),t.TgZ(18,"div",95)(19,"mat-form-field",68)(20,"mat-label"),t._uU(21,"Quantity type"),t.qZA(),t.TgZ(22,"mat-select",69),t.YNc(23,at,3,3,"mat-option",29),t.qZA()()()()}if(2&o){const e=s.$implicit,i=s.index,r=t.oxw().$implicit,n=t.oxw(3);t.Q6J("formGroupName",i),t.xp6(2),t.hij(" Complimentary product no.",i+1,": "),t.xp6(3),t.Q6J("ngIf",!(null!=e.value.product&&e.value.product._id)),t.xp6(1),t.Q6J("ngIf",null==e.value.product?null:e.value.product._id),t.xp6(6),t.Q6J("ngForOf",n.api.additionalProductTypes),t.xp6(11),t.Q6J("ngForOf",n.firmwiseQuantityTypes[r.value.firm_id])}}function ct(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",97),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index,n=t.oxw(3);return t.KtG(n.removeProduct("Product no."+(r+1),n.items,r))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().index;t.xp6(1),t.hij("Remove product no. ",e+1,"")}}function ut(o,s){if(1&o){const e=t.EpF();t.ynx(0)(1,59),t.TgZ(2,"div",60)(3,"h6",61),t._uU(4),t.YNc(5,K,1,0,"i",62),t.qZA(),t.TgZ(6,"div",9)(7,"div",63),t.YNc(8,D,7,2,"mat-form-field",64),t.YNc(9,z,7,1,"div",65),t.YNc(10,W,5,1,"mat-form-field",66),t.qZA(),t.TgZ(11,"div",63)(12,"mat-form-field",30)(13,"mat-label"),t._uU(14,"Quantity"),t.qZA(),t._UZ(15,"input",67),t.qZA(),t.TgZ(16,"mat-form-field",68)(17,"mat-label"),t._uU(18,"Quantity type"),t.qZA(),t.TgZ(19,"mat-select",69),t.YNc(20,tt,3,3,"mat-option",29),t.qZA()()(),t.TgZ(21,"div",63)(22,"mat-form-field",30)(23,"mat-label"),t._uU(24,"Net price"),t.qZA(),t.TgZ(25,"input",70),t.NdJ("keyup",function(){const r=t.CHM(e),n=r.$implicit,_=r.index,g=t.oxw(3);return t.KtG(n.value.other_costs.length>0?g.calculate(_):"")}),t.qZA()(),t.YNc(26,et,4,1,"p",71),t.TgZ(27,"button",72),t.NdJ("click",function(){const n=t.CHM(e).index,_=t.oxw(3);return t.KtG(_.otherCostItemIndex=n)}),t._uU(28),t.qZA()(),t.TgZ(29,"div",73),t.YNc(30,_t,24,6,"div",74),t.qZA(),t.TgZ(31,"div",75)(32,"button",76),t.NdJ("click",function(){const n=t.CHM(e).$implicit,_=t.oxw(3);return t.KtG(_.addAdditionalProduct(n))}),t._uU(33,"Add complimentary product"),t.qZA(),t.YNc(34,ct,2,1,"button",77),t.qZA()()(),t.BQk()()}if(2&o){const e=s.$implicit,i=s.index,r=t.oxw(3);t.xp6(1),t.Q6J("formGroupName",i),t.xp6(3),t.hij(" Product no.",i+1,": "),t.xp6(1),t.Q6J("ngIf",r.items.length>1),t.xp6(3),t.Q6J("ngIf",!(null!=e.value.product&&e.value.product._id)),t.xp6(1),t.Q6J("ngIf",null==e.value.product?null:e.value.product._id),t.xp6(1),t.Q6J("ngIf",r.purchaseFirstFormGroup.value.firm_ids&&r.purchaseFirstFormGroup.value.firm_ids.length>1),t.xp6(10),t.Q6J("ngForOf",r.firmwiseQuantityTypes[e.value.firm_id]),t.xp6(6),t.Q6J("ngIf",e.value.net_price>0),t.xp6(1),t.Q6J("disabled",e.value.net_price<=0),t.xp6(1),t.hij("",e.value.other_costs.length>0?"Update":"Add"," Tax/Surcharge/Discount"),t.xp6(2),t.Q6J("ngForOf",e.controls.additional_items.controls),t.xp6(1),t.Q6J("ngClass",e.controls.additional_items.length<=0?"border-top":""),t.xp6(1),t.MGl("matTooltip","By clicking this button you can add any free or sample products you got with Product no.",i+1,""),t.Q6J("disabled",e.controls.additional_items.length>0&&!e.controls.additional_items.at(-1).valid),t.xp6(2),t.Q6J("ngIf",r.items.length>1)}}function dt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-step",55)(1,"div",23),t.ynx(2,56),t.YNc(3,ut,35,15,"ng-container",47),t.BQk(),t.TgZ(4,"div",57)(5,"button",51),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.addItem())}),t._uU(6,"Add product"),t.qZA()(),t.TgZ(7,"div",58)(8,"button",50),t._uU(9,"Previous step"),t.qZA(),t.TgZ(10,"button",42),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.adjustFirmwiseOtherCosts())}),t._uU(11,"Proceed"),t.qZA()()()()}if(2&o){const e=t.oxw(2);t.Q6J("stepControl",e.purchaseSecondFormGroup),t.xp6(1),t.Q6J("formGroup",e.purchaseSecondFormGroup),t.xp6(2),t.Q6J("ngForOf",e.items.controls),t.xp6(2),t.Q6J("disabled",!e.items.valid),t.xp6(5),t.Q6J("disabled",!e.purchaseSecondFormGroup.valid)}}function mt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"app-taxes-discounts",100),t.NdJ("getValidity",function(r){t.CHM(e);const n=t.oxw().index,_=t.oxw(2);return t.KtG(_.firmWise_total_validity_finalAdjustments("validity",n,r))})("getTotal",function(r){t.CHM(e);const n=t.oxw().index,_=t.oxw(2);return t.KtG(_.firmWise_total_validity_finalAdjustments("total",n,r))})("getFormArray",function(r){t.CHM(e);const n=t.oxw().index,_=t.oxw(2);return t.KtG(_.firmWise_total_validity_finalAdjustments("formArray",n,r))}),t.qZA()}if(2&o){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("returnFormArray",i.returnFormArray)("existingFormArray",e.controls.other_costs)("net_price",i.getTotalByFirm(e.value.firm_details._id))("returnValidity",!0)("returnTotal",!0)}}function lt(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"div",98)(2,"h6",25),t._uU(3),t.qZA(),t.TgZ(4,"h6",25),t._uU(5),t.qZA()(),t.YNc(6,mt,1,5,"app-taxes-discounts",99),t._UZ(7,"hr"),t.BQk()),2&o){const e=s.$implicit,i=s.index;t.oxw();const r=t.MAs(6),n=t.oxw();t.xp6(3),t.AsE("",i+1,". Adjustments for firm : ",e.value.firm_details.name,""),t.xp6(2),t.hij("Net price: ",n.getTotalByFirm(e.value.firm_details._id),""),t.xp6(1),t.Q6J("ngIf",n.purchaseFirstFormGroup.value.purchase_products?2==r._selectedIndex:1==r._selectedIndex)}}function pt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",17)(2,"h5",18),t._uU(3),t.qZA()(),t.TgZ(4,"div",19)(5,"mat-horizontal-stepper",null,20),t.YNc(7,V,2,0,"ng-template",21),t.TgZ(8,"mat-step",22)(9,"div",23)(10,"div",24)(11,"h6",25),t._uU(12,"Please select vendor:"),t.qZA(),t.TgZ(13,"mat-form-field",26)(14,"mat-select",27)(15,"mat-option",28),t._uU(16,"Choose Vendor"),t.qZA(),t.YNc(17,B,2,2,"mat-option",29),t.qZA()()(),t.TgZ(18,"div",24)(19,"h6",25),t._uU(20,"Please enter Invoice No. of this purchase: (Optional)"),t.qZA(),t.TgZ(21,"mat-form-field",30)(22,"mat-label"),t._uU(23,"Invoice No."),t.qZA(),t._UZ(24,"input",31),t.qZA()(),t.TgZ(25,"div",24)(26,"h6",25),t._uU(27,"Please select actual purchase date:"),t.qZA(),t.TgZ(28,"mat-form-field",26),t._UZ(29,"input",32)(30,"mat-datepicker-toggle",33)(31,"mat-datepicker",null,34),t.qZA()(),t.TgZ(33,"div",17)(34,"h6",25),t._uU(35,"Please select your business holdings in which you are receiving this purchase:"),t.qZA(),t.YNc(36,E,2,2,"mat-checkbox",35),t.qZA(),t.TgZ(37,"div",17)(38,"h6",25),t._uU(39,"Do you want to add products of this purchase : "),t._UZ(40,"i",36),t.qZA(),t.TgZ(41,"mat-radio-group",37),t.NdJ("change",function(r){t.CHM(e);const n=t.oxw();return!r.value&&n.items.length>0&&n.itemsRemoveConfirmation(),t.KtG(n.addRemoveFirmWiseNetPriceFields(r.value))}),t.TgZ(42,"mat-radio-button",38),t._uU(43,"Yes"),t.qZA(),t.TgZ(44,"mat-radio-button",38),t._uU(45,"No"),t.qZA()()(),t.TgZ(46,"div",39)(47,"div",9),t.YNc(48,H,7,2,"div",40),t.qZA()(),t.TgZ(49,"div",41)(50,"button",42),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return r.purchaseFirstFormGroup.value.purchase_products&&r.items.length<=0&&r.addItem(),t.KtG(r.adjustFirmwiseOtherCosts())}),t._uU(51,"Proceed"),t.qZA()()()(),t.YNc(52,dt,12,5,"mat-step",43),t.TgZ(53,"mat-step",44)(54,"div",23)(55,"div",45)(56,"h6",46),t._uU(57,"Following you can make adjustments to the final price of the purchase (for e.g Tax, Discount, Surcharge etc.):"),t.qZA(),t.YNc(58,lt,8,4,"ng-container",47),t.qZA(),t.TgZ(59,"div",19)(60,"h6",48),t._uU(61),t.qZA()(),t.TgZ(62,"div",49)(63,"button",50),t._uU(64,"Previous step"),t.qZA(),t.TgZ(65,"button",51),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.returnFormArray.patchValue(!0))}),t._uU(66,"Save Purchase"),t.qZA()()()()()()()}if(2&o){const e=t.MAs(32),i=t.oxw();t.xp6(3),t.hij("",i.purchaseFirstFormGroup.value.purchase_id?"Update":"Add"," Purchase"),t.xp6(5),t.Q6J("stepControl",i.purchaseFirstFormGroup),t.xp6(1),t.Q6J("formGroup",i.purchaseFirstFormGroup),t.xp6(8),t.Q6J("ngForOf",i.vendors),t.xp6(12),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e),t.xp6(6),t.Q6J("ngForOf",i.ownFirms),t.xp6(6),t.Q6J("value",!0),t.xp6(2),t.Q6J("value",!1),t.xp6(4),t.Q6J("ngForOf",i.firmwise_net_prices.controls),t.xp6(2),t.Q6J("disabled",!i.purchaseFirstFormGroup.valid),t.xp6(2),t.Q6J("ngIf",i.purchaseFirstFormGroup.value.purchase_products),t.xp6(1),t.Q6J("stepControl",i.purchaseThirdFormGroup),t.xp6(1),t.Q6J("formGroup",i.purchaseThirdFormGroup),t.xp6(4),t.Q6J("ngForOf",i.firmwise_other_costs.controls),t.xp6(3),t.hij("Total amount: ",i.purchaseFirstFormGroup.value.total_after_adjustment,""),t.xp6(4),t.Q6J("disabled",!i.lastStepValid())}}function ht(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"app-taxes-discounts",101),t.NdJ("getFormArray",function(r){t.CHM(e);const n=t.oxw();return t.KtG(n.productAdjustment(r))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("existingFormArray",e.items.controls[e.otherCostItemIndex].controls.other_costs)("net_price",e.items.controls[e.otherCostItemIndex].controls.net_price.value)}}const ft=[{path:"",component:(()=>{class o{constructor(e,i,r,n){this.api=e,this.fb=i,this.route=r,this.router=n,this.ownFirms=[],this.vendors=[],this.otherCostItemIndex=-1,this.returnFormArray=new a.NI(!1),this.firmwiseQuantityTypes={}}ngOnInit(){this.purchaseFirstFormGroup=this.fb.group({purchase_id:[""],firm_ids:[[],a.kI.required],vendor_id:["",a.kI.required],invoice_no:[""],purchase_date:["",a.kI.required],purchase_products:[!0,a.kI.required],firmwise_net_prices:this.fb.array([]),firmwise_totals:[[]],total_before_adjustment:[0],total_after_adjustment:[0]}),this.purchaseSecondFormGroup=this.fb.group({items:this.fb.array([])}),this.purchaseThirdFormGroup=this.fb.group({firmwise_other_costs:this.fb.array([])}),this.getOwnFirms(),this.getVendors(),this.route.params.subscribe(e=>{})}addRemoveFirmWiseNetPriceFields(e){this.firmwise_net_prices.clear(),e||(this.firmwise_net_prices.clear(),this.purchaseFirstFormGroup.value.firm_ids.map(i=>{this.firmwise_net_prices.push(this.fb.group({firm_details:[this.ownFirms.find(r=>r._id==i),a.kI.required],net_price:["",a.kI.required]}))}))}searchProductByConnectedFirms(e,i){e.target.value.length>2?this.api.searchProductByConnectedFirms({firm_id:this.purchaseFirstFormGroup.value.firm_ids[0],keyword:e.target.value}).subscribe(r=>{200==r.status?i.patchValue({product_suggestions:r.data||[]}):console.log(r.message),console.log(i)}):i.patchValue({product_suggestions:[]})}get firmwise_net_prices(){return this.purchaseFirstFormGroup.get("firmwise_net_prices")}get firmwise_other_costs(){return this.purchaseThirdFormGroup.get("firmwise_other_costs")}firmwise_other_costs_formgroup(){return this.fb.group({firm_details:["",a.kI.required],other_costs:this.fb.array([]),child_formgroup_valid:[!0,a.kI.required],total_returned_by_child:[0,a.kI.required]})}firmWise_total_validity_finalAdjustments(e,i,r){if("validity"==e||"total"==e)this.firmwise_other_costs.controls[i].patchValue("validity"==e?{child_formgroup_valid:r}:{total_returned_by_child:r}),this.itemTotalCalculation();else if("formArray"==e){let n=this.firmwise_other_costs.controls[i].controls.other_costs;n.clear(),r.controls.forEach(_=>{n.push(_)}),this.firmwise_other_costs.length-1==i&&this.savePurchase()}}savePurchase(){$("#loading_overlay").show();let e=[];this.firmwise_other_costs.value.forEach(r=>{e.push({firm_id:r.firm_details._id,adjustments:r.other_costs})});let i={firm_ids:this.purchaseFirstFormGroup.value.firm_ids,vendor_id:this.purchaseFirstFormGroup.value.vendor_id,invoice_no:this.purchaseFirstFormGroup.value.invoice_no,purchase_date:this.purchaseFirstFormGroup.value.purchase_date,products_added:this.purchaseFirstFormGroup.value.purchase_products,firmwise_totals_before_final_adjustments:this.purchaseFirstFormGroup.value.firmwise_totals,total_before_final_adjustment:this.purchaseFirstFormGroup.value.total_before_adjustment,total_after_final_adjustment:this.purchaseFirstFormGroup.value.total_after_adjustment,firmwise_final_adjustments:e,added_by:this.api.loggedInUser._id};if(i.products_added){let r=JSON.parse(JSON.stringify(this.items.value));r.forEach(n=>{let _=n.net_price;n.other_costs.length>0&&(n.adjustments=JSON.parse(JSON.stringify(n.other_costs)),delete n.other_costs,_=n.adjustments.at(-1).new_net_price),e.length>0&&e.find(u=>u.firm_id==n.firm_id).adjustments.forEach(u=>{let d=u.per_or_amount;"percentage"==u.input&&(d=_*u.per_or_amount,d/=100),_="+"==u.type?_+d:_-d}),n.price_after_final_adjustment=_}),i={...i,items:r}}else{let r=[];this.purchaseFirstFormGroup.value.firmwise_net_prices.map(n=>{r.push({firm_id:n.firm_details._id,net_price:n.net_price})}),i={...i,firmwise_net_prices:r}}console.log("Saving the purchase ",i),this.api.addPurchase(i).subscribe(r=>{$("#loading_overlay").hide(),200==r.status?p().fire({icon:"success",title:"Purchase added successfully.",html:"Your purchase by <label class='erp-button p-1 m-1 rounded text-white'>"+this.vendors.find(n=>n._id==this.purchaseFirstFormGroup.value.vendor_id).name+"</label> vendor added successfully."}).then(()=>{this.router.navigate(["/erp/purchases"])}):500==r.status&&p().fire({icon:"error",title:r.message})})}lastStepValid(){let e=!0;for(let i=0;i<this.firmwise_other_costs.length;i++)if(!this.firmwise_other_costs.value[i].child_formgroup_valid){e=!1;break}return e}adjustFirmwiseOtherCosts(){for(;this.firmwise_other_costs.length>0;)this.firmwise_other_costs.removeAt(0);this.purchaseFirstFormGroup.value.firm_ids.map((e,i)=>{this.firmwise_other_costs.push(this.firmwise_other_costs_formgroup()),this.firmwise_other_costs.controls[i].patchValue({firm_details:this.ownFirms.find(r=>r._id==e)})}),this.purchaseFirstFormGroup.value.purchase_products&&this.getQuantityTypesByFirmIds(),this.itemTotalCalculation()}getQuantityTypesByFirmIds(){this.firmwiseQuantityTypes={},this.purchaseFirstFormGroup.value.firm_ids.forEach(e=>this.firmwiseQuantityTypes[e]=[]),this.api.getQuantityTypesByFirmIds({firm_ids:this.purchaseFirstFormGroup.value.firm_ids}).subscribe(e=>{e.data.forEach(i=>{Object.keys(this.firmwiseQuantityTypes).forEach(r=>{(i.universal||-1!=i.firm_ids.findIndex(n=>n==r))&&this.firmwiseQuantityTypes[r].push(i)})})})}get items(){return this.purchaseSecondFormGroup.get("items")}itemFormGroup(){return this.fb.group({product_name:["",a.kI.required],product:[{}],product_suggestions:[[]],firm_id:[this.purchaseFirstFormGroup.value.firm_ids[0]||"",a.kI.required],quantity:["",a.kI.required],quantity_type_id:["",a.kI.required],net_price:[0,a.kI.required],other_costs:this.fb.array([]),additional_items:this.fb.array([])})}addItem(){this.items.push(this.itemFormGroup())}otherCostsFormGroup(){return this.fb.group({name:["",a.kI.required],type:["",a.kI.required],input:["percentage",a.kI.required],per_or_amount:[0],percentage_amount:[0],new_net_price:[0,a.kI.required]})}additionalItemsFormGroup(){return this.fb.group({type:["",a.kI.required],product_name:["",a.kI.required],product:[{}],product_suggestions:[[]],quantity:["",a.kI.required],quantity_type_id:["",a.kI.required]})}addAdditionalProduct(e){e.get("additional_items").push(this.additionalItemsFormGroup())}getOwnFirms(){$("#loading_overlay").show();let e={firm_ids:[]};this.api.loggedInUser.firms_with_roles.map(i=>e.firm_ids.push(i.firm_id)),this.api.getFirmsById(e).subscribe(i=>{this.ownFirms=200==i.status&&i.data.length>0?i.data:[],$("#loading_overlay").hide()})}getVendors(){$("#loading_overlay").show();let e={firm_ids:[]};this.api.loggedInUser.firms_with_roles.map(i=>e.firm_ids.push(i.firm_id)),this.api.getVendors(e).subscribe(i=>{this.vendors=200==i.status&&i.data.length>0?i.data:[],$("#loading_overlay").hide()})}updateFirmId(e){let i=this.purchaseFirstFormGroup.value.firm_ids;i.includes(e)?i.splice(i.findIndex(r=>r==e),1):i.push(e),this.purchaseFirstFormGroup.patchValue({firm_ids:i}),this.items.length>0&&i.length>0&&(1==i.length?this.updateItemFirmId():i.includes(e)||this.updateItemFirmId(e)),this.purchaseFirstFormGroup.value.purchase_products||this.addRemoveFirmWiseNetPriceFields(!1)}updateItemFirmId(e=""){this.items.controls.map(i=>{i.patchValue({firm_id:""!=e&&i.value.firm_id==e?"":this.purchaseFirstFormGroup.value.firm_ids[0]})})}productAdjustment(e){let i=this.items.controls[this.otherCostItemIndex].controls.other_costs;i.clear(),e.controls.forEach(r=>{i.push(r)}),this.otherCostItemIndex=-1,$("#otherCostModalCloseButton").trigger("click"),this.itemTotalCalculation()}calculate(e){this.api.otherCostCalculation(this.items.controls[e].value.net_price,this.items.controls[e].controls.other_costs),this.itemTotalCalculation()}removeProduct(e,i,r){p().fire({icon:"warning",title:"Are you sure ?",html:"Do you want to remove <label class='erp-button p-1 m-1 rounded text-white'>"+e+"</label>",confirmButtonText:"Yes",showCancelButton:!0,cancelButtonText:"No"}).then(n=>{n.isConfirmed&&i.removeAt(r)})}itemsRemoveConfirmation(){p().fire({icon:"warning",title:"Are you sure ?",html:"All the purchase products will be removed.",confirmButtonText:"Yes",showCancelButton:!0,cancelButtonText:"No"}).then(e=>{e.isConfirmed&&this.items.clear()})}itemTotalCalculation(){let e=[],i=0;this.purchaseFirstFormGroup.value.firm_ids.map(n=>e.push({firm_id:n,total:0})),this.purchaseFirstFormGroup.value.purchase_products&&this.items.length>0?this.items.controls.map(n=>{e[e.findIndex(_=>_.firm_id==n.value.firm_id)].total+=n.value.other_costs.length>0?n.value.other_costs.at(-1).new_net_price:n.value.net_price,i+=n.value.other_costs.length>0?n.value.other_costs.at(-1).new_net_price:n.value.net_price}):this.purchaseFirstFormGroup.value.purchase_products||this.firmwise_net_prices.value.map(n=>{e[e.findIndex(_=>_.firm_id==n.firm_details._id)].total=n.net_price,i+=n.net_price}),this.purchaseFirstFormGroup.patchValue({firmwise_totals:e,total_before_adjustment:i});let r=0;this.firmwise_other_costs.value.map(n=>{r+=n.total_returned_by_child>0?n.total_returned_by_child:e[e.findIndex(_=>_.firm_id==n.firm_details._id)].total}),this.purchaseFirstFormGroup.patchValue(r>0?{total_after_adjustment:r}:{total_after_adjustment:i})}getTotalByFirm(e){if(this.purchaseFirstFormGroup.value.firmwise_totals.find(i=>i.firm_id==e))return this.purchaseFirstFormGroup.value.firmwise_totals.find(i=>i.firm_id==e).total}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(A.s),t.Y36(a.qu),t.Y36(l.gz),t.Y36(l.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-purchase"]],decls:11,vars:3,consts:[["class","row m-0",4,"ngIf"],["data-bs-backdrop","static","data-bs-keyboard","false","id","otherCostModal","tabindex","-1","aria-labelledby","otherCostModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","otherCostModalLabel",1,"modal-title","text-primary"],["type","button","id","otherCostModalCloseButton","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"existingFormArray","net_price","getFormArray",4,"ngIf"],[1,"row","m-0"],[1,"col-sm-12","my-3","text-center"],[1,"alert","alert-danger"],[4,"ngIf"],["class","btn erp-button mx-1","routerLink","/erp/add-own-firm",4,"ngIf"],["class","btn erp-button mx-1","routerLink","/erp/add-vendor",4,"ngIf"],["routerLink","/erp/add-own-firm",1,"btn","erp-button","mx-1"],["routerLink","/erp/add-vendor",1,"btn","erp-button","mx-1"],[1,"col-sm-12","my-3"],[1,"rounded","p-2","text-center","bg-light","border","text-primary"],[1,"col-sm-12"],["stepper",""],["matStepperIcon","edit"],["label","Purchase details",3,"stepControl"],[1,"row","m-0",3,"formGroup"],[1,"col-sm-6"],[1,"input-hint-heading"],["appearance","fill",1,"w-100"],["formControlName","vendor_id"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"w-100","mb-2"],["type","text","placeholder","Invoice No.","matInput","","formControlName","invoice_no"],["matInput","","formControlName","purchase_date","placeholder","Purchase date",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],["class","mx-2",3,"checked","change",4,"ngFor","ngForOf"],["role","button","matTooltip","If you add products of purchase they will be added to inventory as well.",1,"fa","fa-info-circle","text-primary","font-size-lg"],["formControlName","purchase_products",3,"change"],[3,"value"],["formArrayName","firmwise_net_prices",1,"col-sm-12"],["class","col-sm-6",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-sm-12","text-end"],["matStepperNext","",1,"btn","erp-button",3,"disabled","click"],["label","Purchased products",3,"stepControl",4,"ngIf"],["label","Finalize Purchase",3,"stepControl"],["formArrayName","firmwise_other_costs",1,"col-sm-12"],[1,"input-hint-heading","mb-3"],[4,"ngFor","ngForOf"],[1,"input-hint-heading","text-right"],[1,"col-sm-12","d-flex","justify-content-between","mt-3"],["matStepperPrevious","",1,"btn","erp-button"],[1,"btn","erp-button",3,"disabled","click"],[1,"mx-2",3,"checked","change"],[1,"col-sm-6",3,"formGroupName"],["type","number","step","any","placeholder","Net price","matInput","","formControlName","net_price"],["label","Purchased products",3,"stepControl"],["formArrayName","items"],[1,"col-sm-12","text-end","my-3"],[1,"col-sm-12","d-flex","justify-content-between"],[3,"formGroupName"],[1,"col-sm-12","border-info","rounded","mb-3","pb-2","px-0","remove-field-bottom-space"],[1,"bg-info","font-size-sm","p-1","rounded-top","d-flex","justify-content-between"],["class","fa fa-times-circle font-size-lg","role","button","aria-hidden","true",3,"click",4,"ngIf"],[1,"col-sm-4"],["class","w-100",4,"ngIf"],["class","w-100 d-flex",4,"ngIf"],["class","w-100 mt-2",4,"ngIf"],["type","text","placeholder","Quantity","matInput","","formControlName","quantity"],[1,"w-100"],["formControlName","quantity_type_id"],["type","number","step","any","placeholder","Net price","matInput","","formControlName","net_price",3,"keyup"],["class","mb-1 input-hint-heading",4,"ngIf"],["data-bs-target","#otherCostModal","data-bs-toggle","modal",1,"btn","btn-sm","erp-button",3,"disabled","click"],["formArrayName","additional_items",1,"col-sm-12"],["class","row m-0 border rounded my-2 py-2",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-sm-12","my-1","text-end","pt-2",3,"ngClass"],[1,"btn","btn-sm","erp-button",3,"disabled","matTooltip","click"],["class","btn btn-sm erp-button-danger ms-2",3,"click",4,"ngIf"],["role","button","aria-hidden","true",1,"fa","fa-times-circle","font-size-lg",3,"click"],["type","text","placeholder","Product name","matInput","","formControlName","product_name",3,"matAutocomplete","keyup"],[3,"optionSelected"],["auto","matAutocomplete"],[1,"w-100","d-flex"],[1,"w-100","mr-2"],["type","text","placeholder","Product name","matInput","","readonly","",3,"value"],[1,"btn","btn-danger",3,"click"],[1,"w-100","mt-2"],["formControlName","firm_id"],[3,"value",4,"ngIf"],["class","input-hint-heading font-size-sm",4,"ngIf"],[1,"input-hint-heading","font-size-sm"],[1,"mb-1","input-hint-heading"],[1,"row","m-0","border","rounded","my-2","py-2",3,"formGroupName"],[1,"mb-1","input-hint-heading","font-size-sm","d-flex","justify-content-between"],["role","button","aria-hidden","true",1,"fa","fa-times-circle","font-size-lg","text-danger",3,"click"],[1,"col-sm-3"],["formControlName","type"],[1,"btn","btn-sm","erp-button-danger","ms-2",3,"click"],[1,"d-flex","justify-content-between"],["submitButtonName","None",3,"returnFormArray","existingFormArray","net_price","returnValidity","returnTotal","getValidity","getTotal","getFormArray",4,"ngIf"],["submitButtonName","None",3,"returnFormArray","existingFormArray","net_price","returnValidity","returnTotal","getValidity","getTotal","getFormArray"],[3,"existingFormArray","net_price","getFormArray"]],template:function(e,i){1&e&&(t.YNc(0,M,10,5,"div",0),t.YNc(1,pt,67,17,"div",0),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h6",5),t._uU(7,"Add Taxes/Surcharges/Discounts"),t.qZA(),t.TgZ(8,"button",6),t.NdJ("click",function(){return i.otherCostItemIndex=-1}),t.qZA()(),t.TgZ(9,"div",7),t.YNc(10,ht,1,2,"app-taxes-discounts",8),t.qZA()()()()),2&e&&(t.Q6J("ngIf",0==i.ownFirms.length||0==i.vendors.length),t.xp6(1),t.Q6J("ngIf",i.ownFirms.length>0),t.xp6(9),t.Q6J("ngIf",-1!=i.otherCostItemIndex))},dependencies:[m.mk,m.sg,m.O5,T.XC,Z.ey,T.ZL,w.oG,v.Mq,v.hl,v.nW,h.KE,h.hX,h.R9,b.Nt,y.VQ,y.U0,F.gD,f.C0,f.Vq,f.Ic,f.fd,f.z9,q.Hw,I.gM,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,a.x0,a.CE,U,l.rH]}),o})()}];let gt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.Bz.forChild(ft),l.Bz]}),o})();var vt=c(500);let xt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.ez,vt.q,gt]}),o})()}}]);